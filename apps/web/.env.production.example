# ============================================================
# DearMe / Capsule Note - PRODUCTION Environment Variables
# Updated: 2025-11-21 (After comprehensive merge)
# ============================================================
# ⚠️ DO NOT COMMIT THIS FILE WITH REAL VALUES
# ⚠️ Set these in Vercel Dashboard → Settings → Environment Variables
# ============================================================

# App Configuration
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://capsulenote.com

# ============================================================
# DATABASE (REQUIRED)
# ============================================================
DATABASE_URL=postgresql://user:password@prod-host/database?sslmode=require

# ============================================================
# CLERK AUTHENTICATION (REQUIRED)
# ============================================================
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_xxx
CLERK_SECRET_KEY=sk_live_xxx
CLERK_WEBHOOK_SECRET=whsec_xxx
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard

# ============================================================
# STRIPE PAYMENTS (REQUIRED)
# ============================================================
STRIPE_SECRET_KEY=sk_live_xxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_PRICE_PRO_MONTHLY=price_xxx
STRIPE_PRICE_PRO_ANNUAL=price_xxx

# ============================================================
# EMAIL PROVIDERS (REQUIRED)
# ============================================================

# Primary: Resend
RESEND_API_KEY=re_xxx

# Email Sender Addresses
EMAIL_FROM_NOTIFICATION="Capsule Note <noreply@capsulenote.com>"
EMAIL_FROM_DELIVERY="Capsule Note <yourcapsulenote@capsulenote.com>"
EMAIL_FROM=no-reply@capsulenote.com

# Fallback: Postmark (RECOMMENDED for 99.95% uptime)
POSTMARK_SERVER_TOKEN=xxx

# ============================================================
# INNGEST JOB SCHEDULING (REQUIRED)
# ============================================================
INNGEST_SIGNING_KEY=signkey-prod-xxx
INNGEST_EVENT_KEY=prod

# ============================================================
# UPSTASH REDIS (REQUIRED)
# ============================================================
UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
UPSTASH_REDIS_REST_TOKEN=xxx

# ============================================================
# ENCRYPTION (REQUIRED) ⚠️
# ============================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# STORE SECURELY - losing this means losing all encrypted data!

# For new deployments (no key rotation yet):
CRYPTO_MASTER_KEY=<generate_new_key_here>

# For key rotation (when you need to rotate the encryption key):
# CRYPTO_MASTER_KEY_V1=<your_first_key>
# CRYPTO_MASTER_KEY_V2=<your_second_key>
# CRYPTO_CURRENT_KEY_VERSION=2  # Use version 2 for new encryptions

# ============================================================
# CRON SECRET (REQUIRED) ⚠️
# ============================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# MUST be at least 32 characters
CRON_SECRET=<generate_64_char_hex_string>

# ============================================================
# OPTIONAL BUT RECOMMENDED
# ============================================================

# Physical Mail Provider
LOB_API_KEY=live_xxx

# Feature Flags - Unleash
UNLEASH_API_URL=https://unleash.yourcompany.com/api
UNLEASH_API_TOKEN=xxx
UNLEASH_APP_NAME=dearme

# Analytics - PostHog
POSTHOG_API_KEY=phc_xxx
POSTHOG_HOST=https://app.posthog.com
NEXT_PUBLIC_POSTHOG_KEY=phc_xxx
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# Error Tracking - Sentry
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ORG=your-org
SENTRY_PROJECT=capsulenote

# Tracing - OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=https://api.axiom.co/v1/traces
OTEL_EXPORTER_OTLP_HEADERS=Authorization=Bearer xxx

# ============================================================
# DO NOT SET IN PRODUCTION
# ============================================================
# SKIP_ENV_VALIDATION=true  # Never skip validation in production!
